{"version":3,"file":"react-native-camera-hooks.js","sources":["../src/constants.ts","../src/toggle.ts","../src/initialState.ts","../src/misc.ts","../src/takePicture.ts","../src/recordVideo.ts","../src/stopRecording.ts","../src/preview.ts","../src/autofocusTouch.ts","../src/useTextRecognition.ts","../src/useFaceDetection.ts","../src/useBarcodeDetection.ts","../src/hooks.js"],"sourcesContent":["export const flashModeOrder = {\n  off: 'on',\n  on: 'auto',\n  auto: 'torch',\n  torch: 'off',\n};\n\nexport const wbOrder = {\n  auto: 'sunny',\n  sunny: 'cloudy',\n  cloudy: 'shadow',\n  shadow: 'fluorescent',\n  fluorescent: 'incandescent',\n  incandescent: 'auto',\n};\n","import { useState } from 'react';\nimport { flashModeOrder, wbOrder } from './constants';\n\nconst useToggle = (initialState = '', values = []) => {\n  const [state, setState] = useState(initialState);\n\n  return [\n    state,\n    () =>\n      setState(\n        !values\n          ? _state => !_state\n          : state === values[0]\n          ? values[1]\n          : values[0]\n      ),\n  ];\n};\n\nexport const useFlash = (state = '') => {\n  const [flash, setFlash] = useState<string>(state);\n\n  const toggleFlash = () => {\n    setFlash(flashModeOrder[flash]);\n  };\n\n  return [\n    flash,\n    {\n      toggleFlash,\n      setFlash,\n    },\n  ];\n};\n\nexport const useWhiteBalance = (state = '') => {\n  const [whiteBalance, setWhiteBalance] = useState<string>(state);\n\n  const toggleWB = () => {\n    Object.keys(wbOrder).indexOf(whiteBalance);\n    setWhiteBalance(wbOrder[whiteBalance]);\n  };\n\n  return [\n    whiteBalance,\n    {\n      toggleWB,\n      setWhiteBalance,\n    },\n  ];\n};\n\nexport const useAutoFocus = (state = '', toggleModes) => {\n  const [autoFocus, toggleAutoFocus] = useToggle(state, toggleModes);\n\n  return [autoFocus, toggleAutoFocus];\n};\n\nexport const useToggleFacing = (state = '', toggleModes) => {\n  const [type, toggleFacing] = useToggle(state, toggleModes);\n\n  return [type, toggleFacing];\n};\n","import { Dimensions } from 'react-native';\n\nexport interface CameraOptions {\n  flash?: string | number;\n  zoom?: number;\n  autoFocus?: string | boolean | number;\n  autoFocusPoint?: {\n    normalized: {\n      x: number;\n      y: number;\n    };\n    drawRectPosition: {\n      x: number;\n      y: number;\n    };\n  };\n  focusDepth?: number;\n  type?: string | number;\n  whiteBalance?: number | string;\n  ratio?: string;\n  isRecording?: boolean;\n  canDetectFaces?: boolean;\n  canDetectText?: boolean;\n  canDetectBarcode?: boolean;\n  faces?: any[];\n  textBlocks?: any[];\n  barcodes?: any[];\n}\n\nexport const initialCameraState: CameraOptions = {\n  flash: 'on',\n  zoom: 0,\n  autoFocus: 'on',\n  autoFocusPoint: {\n    normalized: { x: 0.5, y: 0.5 }, // normalized values required for autoFocusPointOfInterest\n    drawRectPosition: {\n      x: Dimensions.get('window').width * 0.5 - 32,\n      y: Dimensions.get('window').height * 0.5 - 32,\n    },\n  },\n  focusDepth: 0,\n  type: 'back',\n  whiteBalance: 'auto',\n  ratio: '16:9',\n\n  isRecording: false,\n  canDetectFaces: false,\n  canDetectText: false,\n  canDetectBarcode: false,\n  faces: [],\n  textBlocks: [],\n  barcodes: [],\n};\n","import { useState } from 'react';\n\nexport const useZoom = (state = 0) => {\n  const [zoom, setZoom] = useState(state);\n\n  const zoomIn = () => {\n    if (zoom + 0.01 <= 1 && zoom + 0.01 >= 0) {\n      setZoom(zoom + 0.01);\n    }\n  };\n\n  const zoomOut = () => {\n    if (zoom - 0.1 <= 1 && zoom - 0.1 >= 0) {\n      setZoom(zoom - 0.1);\n    }\n  };\n\n  return [\n    zoom,\n    {\n      setZoom,\n      zoomIn,\n      zoomOut,\n    },\n  ];\n};\n\nexport const useCameraState = (state = {}) => {\n  const [cameraState, setCameraState] = useState(state);\n\n  const toggleCameraState = newCameraState => {\n    setCameraState({ [newCameraState]: !cameraState[newCameraState] });\n  };\n\n  return [\n    cameraState,\n    {\n      toggleCameraState,\n      setCameraState,\n    },\n  ];\n};\n","export interface TakePictureResponse {\n  width: number;\n  height: number;\n  uri: string;\n  base64?: string;\n  exif?: { [name: string]: any };\n  pictureOrientation: number;\n  deviceOrientation: number;\n}\n\nexport interface TakePictureOptions {\n  quality?: number;\n  orientation?: number | string;\n  base64?: boolean;\n  exif?: boolean;\n  width?: number;\n  mirrorImage?: boolean;\n  doNotSave?: boolean;\n  pauseAfterCapture?: boolean;\n  skipProcessing?: boolean;\n  fixOrientation?: boolean;\n  forceUpOrientation?: boolean;\n}\n\nexport const defaultPictureTakeOptions: TakePictureOptions = {\n  quality: 0.8,\n  width: undefined,\n  base64: false,\n  doNotSave: false,\n  exif: true,\n  forceUpOrientation: true,\n  fixOrientation: true,\n  orientation: 'portrait',\n};\n\nexport const takePicture = async (\n  { cameraRef }: { cameraRef: any },\n  options: TakePictureOptions = defaultPictureTakeOptions\n): Promise<TakePictureResponse | undefined> => {\n  if (cameraRef && cameraRef.takePictureAsync) {\n    return cameraRef.takePictureAsync(options);\n  } else if (\n    cameraRef &&\n    cameraRef.current &&\n    cameraRef.current.takePictureAsync\n  ) {\n    return cameraRef.current.takePictureAsync(options);\n  }\n};\n","export interface RecordResponse {\n  uri: string;\n  videoOrientation: number;\n  deviceOrientation: number;\n  isRecordingInterrupted: boolean;\n  codec: string;\n}\n\nexport interface RecordOptions {\n  quality?: string;\n  orientation?: number | string;\n  maxDuration?: number;\n  maxFileSize?: number;\n  mute?: boolean;\n  mirrorVideo?: boolean;\n  path?: string;\n  videoBitrate?: number;\n  codec?: string;\n}\n\nexport const defaultVideoRecordOptions: RecordOptions = {\n  quality: '720p',\n  orientation: 'auto',\n  maxDuration: 5,\n  mute: false,\n  mirrorVideo: false,\n  videoBitrate: 5000000,\n};\n\nexport const recordVideo = async (\n  { cameraRef }: { cameraRef: any },\n  options: RecordOptions = defaultVideoRecordOptions\n): Promise<RecordResponse | undefined> => {\n  if (cameraRef && cameraRef.recordAsync) {\n    return cameraRef.recordAsync(options);\n  } else if (cameraRef && cameraRef.current && cameraRef.current.recordAsync) {\n    return cameraRef.current.recordAsync(options);\n  }\n};\n","export const stopRecording = async ({\n  cameraRef,\n}: {\n  cameraRef: any;\n}): Promise<any> => {\n  if (cameraRef && cameraRef.stopRecording) {\n    return cameraRef.stopRecording();\n  } else if (\n    cameraRef &&\n    cameraRef.current &&\n    cameraRef.current.stopRecording\n  ) {\n    return cameraRef.current.stopRecording();\n  }\n};\n","export const pausePreview = async ({\n  cameraRef,\n}: {\n  cameraRef: any;\n}): Promise<boolean> => {\n  if (cameraRef && cameraRef.current && cameraRef.current.pausePreview) {\n    await cameraRef.current.pausePreview();\n    return true;\n  }\n  return false;\n};\n\nexport const resumePreview = async ({\n  cameraRef,\n}: {\n  cameraRef: any;\n}): Promise<boolean> => {\n  if (cameraRef && cameraRef.current && cameraRef.current.resumePreview) {\n    await cameraRef.current.resumePreview();\n    return true;\n  }\n  return false;\n};\n","import { useState, useCallback } from 'react';\nimport { Dimensions } from 'react-native';\n\nexport const useAutoFocusTouch = (state = {}) => {\n  const [autoFocusPoint, setAutoFocusPoint] = useState(state);\n\n  const touchToFocus = useCallback(event => {\n    const { pageX, pageY } = event.nativeEvent;\n    const screenWidth = Dimensions.get('window').width;\n    const screenHeight = Dimensions.get('window').height;\n    const isPortrait = screenHeight > screenWidth;\n\n    let x = pageX / screenWidth;\n    let y = pageY / screenHeight;\n\n    // Coordinate transform for portrait. See autoFocusPointOfInterest in docs for more info\n    if (isPortrait) {\n      x = pageY / screenHeight;\n      y = -(pageX / screenWidth) + 1;\n    }\n\n    setAutoFocusPoint({\n      normalized: { x, y },\n      drawRectPosition: { x: pageX, y: pageY },\n    });\n  }, []);\n\n  return [\n    autoFocusPoint,\n    {\n      touchToFocus,\n      setAutoFocusPoint,\n    },\n  ];\n};\n","import { useState, useCallback } from 'react';\n\nexport const useTextRecognition = (state = []) => {\n  const [textBlocks, setTextblocks] = useState(state);\n\n  const textRecognized = useCallback(data => {\n    setTextblocks(data.textBlocks);\n  }, []);\n\n  return [textBlocks, { textRecognized }];\n};\n","import { useState, useCallback } from 'react';\n\nexport const useFaceDetection = (state = []) => {\n  const [faces, setFaces] = useState(state);\n\n  const facesDetected = useCallback(data => {\n    setFaces(data.faces);\n  }, []);\n\n  return [faces, { facesDetected }];\n};\n","import { useState, useCallback } from 'react';\n\nexport const useBarcodeDetection = (state = []) => {\n  const [barcodes, setBarcodes] = useState(state);\n\n  const barcodeRecognized = useCallback(\n    data => {\n      setBarcodes(data.barcodes);\n    },\n    [setBarcodes]\n  );\n\n  return [barcodes, { barcodeRecognized }];\n};\n","/* eslint-disable react-hooks/rules-of-hooks */\nimport { useState, useRef, useMemo } from 'react';\nimport {\n  useFlash,\n  useWhiteBalance,\n  useAutoFocus,\n  useToggleFacing,\n} from './toggle.ts';\nimport { initialCameraState } from './initialState.ts';\nimport { useZoom, useCameraState } from './misc';\nimport { takePicture as _takePicture } from './takePicture';\nimport { recordVideo as _recordVideo } from './recordVideo';\nimport { stopRecording as _stopRecording } from './stopRecording';\nimport { pausePreview, resumePreview } from './preview';\nimport { useAutoFocusTouch } from './autofocusTouch';\nimport { useTextRecognition } from './useTextRecognition';\nimport { useFaceDetection } from './useFaceDetection';\nimport { useBarcodeDetection } from './useBarcodeDetection';\n\nexport const useCamera = (cameraOptions = initialCameraState) => {\n  const mergedCameraOptions = {\n    ...initialCameraState,\n    ...cameraOptions,\n  };\n  const cameraRef = useRef(null);\n  const [type, toggleFacing] = useToggleFacing(mergedCameraOptions.type, [\n    'front',\n    'back',\n  ]);\n  const [flash, { setFlash, toggleFlash }] = useFlash(\n    mergedCameraOptions.flash\n  );\n  const [whiteBalance, { setWhiteBalance, toggleWB }] = useWhiteBalance(\n    mergedCameraOptions.whiteBalance\n  );\n  const [\n    autoFocus,\n    toggleAutoFocus,\n  ] = useAutoFocus(mergedCameraOptions.autoFocus, ['on', 'off']);\n  const [\n    autoFocusPoint,\n    { setAutoFocusPoint, touchToFocus },\n  ] = useAutoFocusTouch(mergedCameraOptions.autoFocusPoint);\n  const [focusDepth, setFocusDepth] = useState(mergedCameraOptions.focusDepth);\n  const [cameraState, { setCameraState, toggleCameraState }] = useCameraState(\n    {}\n  );\n  const [textBlocks, { textRecognized }] = useTextRecognition([]);\n  const [faces, { facesDetected }] = useFaceDetection([]);\n  const [barcodes, { barcodeRecognized }] = useBarcodeDetection([]);\n  const [ratio, setRatio] = useState(mergedCameraOptions.ratio);\n  const [isRecording, setIsRecording] = useState(false);\n\n  const [zoom, { setZoom, zoomIn, zoomOut }] = useZoom(\n    mergedCameraOptions.zoom\n  );\n\n  const drawFocusRingPosition = useMemo(\n    () => ({\n      top: autoFocusPoint.drawRectPosition.y - 32,\n      left: autoFocusPoint.drawRectPosition.x - 32,\n    }),\n    [autoFocusPoint]\n  );\n\n  return [\n    {\n      cameraRef,\n      type,\n      flash,\n      whiteBalance,\n      autoFocus,\n      autoFocusPoint,\n      zoom,\n      focusDepth,\n      cameraState,\n      drawFocusRingPosition,\n      textBlocks,\n      faces,\n      barcodes,\n      ratio,\n      isRecording,\n    },\n    {\n      setFlash,\n      setWhiteBalance,\n      setZoom,\n      setCameraState,\n      setAutoFocusPoint,\n      toggleFacing,\n      toggleFlash,\n      toggleWB,\n      toggleAutoFocus,\n      touchToFocus,\n      zoomIn,\n      zoomOut,\n      setFocusDepth,\n      toggleCameraState,\n      takePicture: (options) => _takePicture({ cameraRef }, options),\n      recordVideo: (options) => _recordVideo({ cameraRef }, options),\n      stopRecording: () => _stopRecording({ cameraRef }),\n      pausePreview,\n      isRecording,\n      resumePreview,\n      setRatio,\n      setIsRecording,\n      barcodeRecognized,\n      textRecognized,\n      facesDetected,\n    },\n  ];\n};\n"],"names":["useCamera","cameraOptions","initialCameraState","mergedCameraOptions","cameraRef","useRef","useToggleFacing","type","toggleFacing","useFlash","flash","setFlash","toggleFlash","useWhiteBalance","whiteBalance","setWhiteBalance","toggleWB","useAutoFocus","autoFocus","toggleAutoFocus","useAutoFocusTouch","autoFocusPoint","setAutoFocusPoint","touchToFocus","useState","focusDepth","setFocusDepth","useCameraState","cameraState","setCameraState","toggleCameraState","useTextRecognition","textBlocks","textRecognized","useFaceDetection","faces","facesDetected","useBarcodeDetection","barcodes","barcodeRecognized","ratio","setRatio","isRecording","setIsRecording","useZoom","zoom","setZoom","zoomIn","zoomOut","drawFocusRingPosition","useMemo","top","drawRectPosition","y","left","x","takePicture","options","_takePicture","recordVideo","_recordVideo","stopRecording","_stopRecording","pausePreview","resumePreview"],"mappings":"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"}